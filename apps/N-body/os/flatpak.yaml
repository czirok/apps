app-id: org.gnome.nbody
runtime: org.gnome.Platform
runtime-version: '48'
sdk: org.gnome.Sdk
command: nbody
modules:
  - name: nbody
    buildsystem: simple
    sources:
      - type: file
        path: LICENSE
      - type: file
        path: nbody
      - type: file
        path: libSkiaSharp.so
      - type: file
        path: appsettings.json
      - type: file
        path: I18N.tar.gz
      - type: file
        path: nbody.desktop
      - type: file
        path: nbody.svg
      - type: file
        path: org.gnome.nbody.gschema.xml
    build-commands:
      - install -D -m644 LICENSE /app/share/nbody/LICENSE
      - install -D -m755 nbody /app/bin/nbody
      - install -D -m644 libSkiaSharp.so /app/bin/libSkiaSharp.so
      - mkdir -p /app/bin/I18N
      - tar -xzf I18N.tar.gz -C /app/bin/
      - install -D -m644 appsettings.json /app/bin/appsettings.json
      - install -D -m644 nbody.desktop /app/share/applications/org.gnome.nbody.desktop
      - install -D -m644 nbody.svg /app/share/icons/hicolor/scalable/apps/org.gnome.nbody.svg
      - install -D -m644 org.gnome.nbody.gschema.xml /app/share/glib-2.0/schemas/org.gnome.nbody.gschema.xml
      - glib-compile-schemas /app/share/glib-2.0/schemas
      - gtk-update-icon-cache -q -t -f /app/share/icons/hicolor || true
finish-args:
  - --filesystem=host
  - --socket=wayland
  - --socket=x11
